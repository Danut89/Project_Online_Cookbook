{% extends "base.html" %}
{% block content %}

<!-- üåü Hero Section -->
<section class="hero-section text-white text-center py-5 mb-4" style="background: linear-gradient(to right, #a0522d, #ffb347); border-radius: 12px;">
  <div class="container">
    <h1 class="display-4 fw-bold">Discover & Share Incredible Recipes</h1>
    <p class="lead">A community-powered cookbook for food lovers everywhere.</p>
    <a href="{{ url_for('main.add_recipe') }}" class="btn btn-light btn-lg mt-3 fw-semibold rounded-pill px-4">üç≥ Add Your Recipe</a>
  </div>
</section>

<!-- üîç Redesigned Filter & Search Bar -->
<section class="container mb-5">
  <form method="GET" action="{{ url_for('main.home') }}" class="p-4 bg-white shadow-sm rounded-4">
    <div class="row g-3 align-items-end">
      <div class="col-md-6">
        <label class="form-label fw-semibold">üîç Search Recipes</label>
        <input type="text" name="q" class="form-control rounded-pill px-4" placeholder="e.g. Pasta, Vegan..."
               value="{{ request.args.get('q', '') }}">
      </div>
      <div class="col-md-3">
        <label class="form-label fw-semibold">üçù Cuisine</label>
        <input type="text" name="cuisine" class="form-control rounded-pill px-4" placeholder="e.g. Italian, Asian"
               value="{{ request.args.get('cuisine', '') }}">
      </div>
      <div class="col-md-2">
        <label class="form-label fw-semibold">‚öôÔ∏è Difficulty</label>
        <select name="difficulty" class="form-select rounded-pill px-4">
          <option value="">All</option>
          <option value="Easy" {% if request.args.get('difficulty') == 'Easy' %}selected{% endif %}>Easy</option>
          <option value="Medium" {% if request.args.get('difficulty') == 'Medium' %}selected{% endif %}>Medium</option>
          <option value="Hard" {% if request.args.get('difficulty') == 'Hard' %}selected{% endif %}>Hard</option>
        </select>
      </div>
      <div class="col-md-1 d-grid">
        <button type="submit" class="btn btn-primary rounded-pill fw-bold">Apply</button>
      </div>
    </div>
  </form>
  {% if request.args %}
    <div class="mt-2 text-end">
      <a href="{{ url_for('main.home') }}" class="btn btn-sm btn-outline-secondary rounded-pill">Clear Filters</a>
    </div>
  {% endif %}
</section>

<!-- üßæ Recipe Grid -->
<section class="container">
  {% if recipes %}
    <div class="row g-4">
      {% for recipe in recipes %}
        <div class="col-md-4">
          <div class="card h-100 shadow-sm border-0 rounded-4">
            {% if recipe.image_url %}
              <img src="{{ recipe.image_url }}" class="card-img-top rounded-top-4" style="height: 200px; object-fit: cover;">
            {% else %}
              <img src="{{ url_for('static', filename='uploads/default_recipe.jpg') }}" class="card-img-top rounded-top-4" style="height: 200px; object-fit: cover;">
            {% endif %}
            <div class="card-body d-flex flex-column">
              <h5 class="fw-semibold text-dark">{{ recipe.title }}</h5>
              <p class="text-muted small mb-2">{{ recipe.description[:90] }}...</p>
              <div class="mb-2">
                {% if recipe.categories %}
                  {% for cat in recipe.categories %}
                    <span class="badge bg-info text-dark rounded-pill me-1">{{ cat.name }}</span>
                  {% endfor %}
                {% endif %}
                {% if recipe.difficulty %}
                  <span class="badge bg-warning text-dark rounded-pill">{{ recipe.difficulty }}</span>
                {% endif %}
              </div>
              <div class="mt-auto">
                <a href="{{ url_for('main.view_recipe', recipe_id=recipe.id) }}" class="btn btn-outline-primary w-100 rounded-pill fw-semibold">View Recipe</a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info shadow-sm rounded-pill text-center">
      No recipes found. <a href="{{ url_for('main.add_recipe') }}">Add one here</a>!
    </div>
  {% endif %}
</section>

{% endblock %}